---
output:
  md_document:
    variant: gfm

---
<p align="justify">    

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, include = TRUE, echo = FALSE}
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(dev = 'svg') # set output device to svg
```


```{r load and prep, include = TRUE, echo = FALSE, message = FALSE}
source("subscripts/load_and_clean_data.R")
library(tidyverse)
library(patchwork)
library(png)
library(ggtext)
library(tidyverse)
library(ggh4x)
library(ggimage)


ncd   = readPNG("raw/icons/NCD.png")
cd    = readPNG("raw/icons/CD.png")
wash  = readPNG("raw/icons/WASHOUT.png")
decaf = readPNG("raw/icons/DECAF.png")
caff  = readPNG("raw/icons/CAFF.png")
```

Fig. 1a: Cognitive effects of coffee. 
```{r, warning=FALSE, message = FALSE}
source("new_scripts/fig_1_behav_cog_health_data.R")
```

```{r, warning=FALSE, message = FALSE, fig.width = 10, fig.height = 14}
(plot_cog_NCD | plot_cog_CD) + 
  plot_layout(guides = 'collect', widths = c(1,3))

```


```{r, warning=FALSE, message = FALSE, fig.width = 10, fig.height = 8}
plot_cog_craving
```


Fig 2a Microbiome
```{r, warning=FALSE, message = FALSE}
source("new_scripts/fig_2_gi_microbiome_data.R")
```

```{r, warning=FALSE, message = FALSE, fig.width = 16, fig.height = 14}
(plot_mb_NCD |  plot_mb_CD) + 
  plot_layout(guides = 'collect', widths = c(1,8))

```


Fig 2b Metabolome
```{r, warning=FALSE, message = FALSE}
source("new_scripts/fig_2_gi_metabolome_data.R")
```


```{r fig.width=10, fig.height=10, message=FALSE, warning=FALSE}
(plot_mt_NCD | plot_mt_CD) + 
  plot_layout(guides = 'collect', widths = c(1,3))
```
Fig 2c Cytokines
```{r, warning=FALSE, message = FALSE}
source("new_scripts/fig_2_cytokine_data.R")
```


```{r fig.width=10, fig.height=8, message=FALSE, warning=FALSE}
(plot_cyt_stim_NCD | plot_cyt_stim_CD) + 
  plot_layout(guides = 'collect', widths = c(1,3))
```


```{r fig.width=10, fig.height=10, message=FALSE, warning=FALSE}
(plot_cyt_unstim_NCD | plot_cyt_unstim_CD) + 
  plot_layout(guides = 'collect', widths = c(1,3))
```

```{r fig.width=12, fig.height=12, message=FALSE, warning=FALSE}
source("new_scripts/fig_final_integration.R")
```